import Foundation
import SwiftAgent

// MARK: - Dimension Generation Response

/// Response from task-specific dimension generation.
///
/// The LLM generates evaluation dimensions tailored to the specific task.
@Generable
public struct DimensionGenerationResponse: Sendable {
    @Guide(description: "タスク固有の評価次元（最大3つ）")
    public let dimensions: [GeneratedDimension]
}

/// Individual dimension generated by LLM.
@Generable
public struct GeneratedDimension: Sendable {
    @Guide(description: "次元名（例：Technical Accuracy, Source Diversity）")
    public let name: String

    @Guide(description: "この次元が何を評価するかの説明")
    public let description: String

    @Guide(description: "この次元の重要度（0.0〜1.0）", .range(0.0...1.0))
    public let importance: Double

    @Guide(description: "スコア1の基準")
    public let rubricLow: String

    @Guide(description: "スコア5の基準")
    public let rubricMid: String

    @Guide(description: "スコア10の基準")
    public let rubricHigh: String
}

// MARK: - Dimension Score Response

/// Response from dimension scoring.
///
/// The LLM evaluates the research output on a specific dimension.
@Generable
public struct DimensionScoreResponse: Sendable {
    @Guide(description: "スコア（1-10）", .range(1...10))
    public let score: Int

    @Guide(description: "このスコアをつけた理由（具体的な根拠を含む）")
    public let reasoning: String

    @Guide(description: "スコアの根拠となる具体的な引用・例（最大3つ）")
    public let evidence: [String]

    @Guide(description: "改善のための提案")
    public let suggestions: [String]
}

// MARK: - Overall Quality Response

/// Response from overall quality assessment.
///
/// Summarizes the quality evaluation across all dimensions.
@Generable
public struct OverallQualityResponse: Sendable {
    @Guide(description: "全体的な品質の要約")
    public let summary: String

    @Guide(description: "主な強み（2-3項目）")
    public let strengths: [String]

    @Guide(description: "主な弱み（2-3項目）")
    public let weaknesses: [String]

    @Guide(description: "優先度の高い改善提案（2-3項目）")
    public let priorityImprovements: [String]
}
